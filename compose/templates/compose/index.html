{% extends 'base.html' %}

{% load static %}

{% block extrahead %}
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

<script src="{% static 'compose/js/index.js' %}"></script>

<link rel="stylesheet" href="{% static 'compose/css/index.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  {% csrf_token %}

  {% include 'compose/accountmenu.html' %}

  <textarea id="textInput">{{ writing }}</textarea>
  <p id="errorMsg"></p>
  <p>
    <span id="wordCount">0 words</span>
    (<span id="cumulativeWordCount">{{ word_count }}</span> to date)
  </p>
  <p>
    Current daily word goal: <span id="goal">{{ goal.count }}</span>
    <!-- Hidden initially -->
    <input type="number" id="goalInput" step="10" min="10">
    words
    <button id="editButton">Edit</button>

    <!-- These buttons are hidden to begin with. -->
    <button id="saveButton">Save</button>
    <button id="cancelButton">Cancel</button>
  </p>
  <h3>Past writing:</h3>
  <ul>
    {% for writing in past %}
    <li><a href="{{ writing.get_absolute_url }}">{{ writing.date }}</a>
      ({{ writing.word_count }} word{{ writing.word_count|pluralize }})
    </li>
    {% empty %}
    <li>No writing yet!</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
